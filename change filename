import os

# è®¾ç½®è¦éå†çš„æ ¹ç›®å½•
root_folder = r"C:\...\..."

for dirpath, dirnames, filenames in os.walk(root_folder):
    parent_folder = os.path.basename(dirpath)  # å½“å‰æ–‡ä»¶å¤¹å

    for filename in filenames:
        if filename.endswith(".pdb"):
            # åˆ†ç¦»æ–‡ä»¶åå’Œæ‰©å±•å
            name_without_ext, ext = os.path.splitext(filename)

            # åˆ é™¤æ–‡ä»¶åä¸­éæ‰©å±•åçš„ç‚¹ï¼ˆåªä¿ç•™ .pdbï¼‰
            name_cleaned = name_without_ext.replace('.', '')

            # æ–°çš„æ–‡ä»¶åï¼š<çˆ¶æ–‡ä»¶å¤¹å>_<æ¸…ç†åçš„æ–‡ä»¶å>.pdb
            new_filename = f"{parent_folder}_{name_cleaned}.pdb"

            # æ„é€ å®Œæ•´è·¯å¾„
            old_path = os.path.join(dirpath, filename)
            new_path = os.path.join(dirpath, new_filename)

            # é‡å‘½åæ–‡ä»¶
            os.rename(old_path, new_path)
            print(f"âœ… å·²é‡å‘½å: {old_path} â†’ {new_path}")

print("ğŸ‰ æ‰€æœ‰ .pdb æ–‡ä»¶å·²æ‰¹é‡é‡å‘½åå®Œæ¯•ã€‚")
